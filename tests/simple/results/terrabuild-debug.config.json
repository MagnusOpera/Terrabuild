{
  "space": null,
  "sourceControl": {
    "headCommit": "1234",
    "branchOrTag": "main",
    "logType": [
      "markdown",
      "terrabuild-debug.md"
    ],
    "ci": true,
    "name": "GitHub"
  },
  "selectedProjects": [
    "deployments/terraform-deploy",
    "libraries/dotnet-lib",
    "libraries/shell-lib",
    "projects/dotnet-app",
    "projects/make-app",
    "projects/npm-app",
    "projects/rust-app"
  ],
  "targets": {
    "build": {
      "dependsOn": [
        "^build"
      ],
      "rebuild": [
        "boolean",
        false
      ]
    },
    "deploy": {
      "dependsOn": [
        "push"
      ],
      "rebuild": [
        "boolean",
        false
      ]
    },
    "dist": {
      "dependsOn": [
        "build"
      ],
      "rebuild": [
        "boolean",
        false
      ]
    },
    "docker": {
      "dependsOn": [
        "dist"
      ],
      "rebuild": [
        "boolean",
        false
      ]
    },
    "push": {
      "dependsOn": [
        "docker"
      ],
      "rebuild": [
        "boolean",
        false
      ]
    }
  },
  "projects": {
    "deployments/terraform-deploy": {
      "id": "deployments/terraform-deploy",
      "hash": "FB65D7F55DF0B7DA2523B1656B444F5C74CCC1633DA14F33B3FA155DA452B467",
      "dependencies": [
        "projects/dotnet-app",
        "projects/npm-app"
      ],
      "files": [
        ".terraform.lock.hcl",
        "PROJECT",
        "backend.tf",
        "deploy.log",
        "test_res.tf",
        "variables.tf"
      ],
      "targets": {
        "build": {
          "hash": "A7344E05EA320EF316EB1DFE9704D1C0BE3026AED1AC239B4873702951633A85",
          "variables": {
            "workspace": "String \u0022default\u0022"
          },
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "*.planfile"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@terraform plan",
              "actions": [
                {
                  "command": "terraform",
                  "arguments": "init"
                },
                {
                  "command": "terraform",
                  "arguments": "workspace select default"
                },
                {
                  "command": "terraform",
                  "arguments": "plan -out=terrabuild.planfile -var=\u0022dotnet_app_version=BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C\u0022 -var=\u0022npm_app_version=C35EBCC267398EEEC270894F7616EEE6382F70EAEC3C16247A7EBE487A914E4B\u0022"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        },
        "deploy": {
          "hash": "06393D190E8DBC6D9649B9AD0E1A872FCCF324C5ACDC0BA02C391875CE8CD00D",
          "variables": {
            "workspace": "String \u0022default\u0022"
          },
          "dependsOn": [
            "push"
          ],
          "outputs": [
            "*.planfile"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@terraform apply",
              "actions": [
                {
                  "command": "terraform",
                  "arguments": "init"
                },
                {
                  "command": "terraform",
                  "arguments": "workspace select default"
                },
                {
                  "command": "terraform",
                  "arguments": "apply terrabuild.planfile"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": [
        "infra"
      ]
    },
    "libraries/dotnet-lib": {
      "id": "libraries/dotnet-lib",
      "hash": "666908E6236D9394711779EEAB166ED8BC6341DF1EEEF724C7DE083D0C9709DC",
      "dependencies": [],
      "files": [
        "Class1.cs",
        "PROJECT",
        "dotnet-lib.csproj"
      ],
      "targets": {
        "build": {
          "hash": "13F7CAF67B8934899D1AAA883854B159B9E1E49CFDAB389BDD24E4672F57D826",
          "variables": {
            "configuration": "String \u0022Debug\u0022"
          },
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "**/*.binlog",
            "bin/",
            "obj/",
            "obj/*.json",
            "obj/*.props",
            "obj/*.targets"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@dotnet build",
              "actions": [
                {
                  "command": "dotnet",
                  "arguments": "build  --configuration Debug    "
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": {
                "script": {},
                "command": "build",
                "context": [
                  "map",
                  {
                    "configuration": [
                      "string",
                      "Debug"
                    ],
                    "context": [
                      "object",
                      {
                        "debug": true,
                        "directory": "libraries/dotnet-lib",
                        "ci": true,
                        "nodeHash": "666908E6236D9394711779EEAB166ED8BC6341DF1EEEF724C7DE083D0C9709DC",
                        "command": "build",
                        "branchOrTag": "main"
                      }
                    ]
                  }
                ]
              }
            }
          ]
        }
      },
      "labels": []
    },
    "libraries/shell-lib": {
      "id": "libraries/shell-lib",
      "hash": "60F9371D05141EC9C0E9CC759730C62EC37C01D9EEB1330EFE2737AA01F557A6",
      "dependencies": [],
      "files": [
        "PROJECT"
      ],
      "targets": {
        "build": {
          "hash": "B9AE1A51CFF46F86872F9AF55D2B9D7596DE1F0330CC9AAF307EAB73027D680A",
          "variables": {},
          "dependsOn": [
            "^build"
          ],
          "outputs": [],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@shell echo",
              "actions": [
                {
                  "command": "echo",
                  "arguments": "building library1"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": []
    },
    "projects/dotnet-app": {
      "id": "projects/dotnet-app",
      "hash": "BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C",
      "dependencies": [
        "libraries/dotnet-lib"
      ],
      "files": [
        "../shared-folder/Terminal.cs",
        "Dockerfile",
        "PROJECT",
        "Program.cs",
        "dotnet-app.csproj"
      ],
      "targets": {
        "build": {
          "hash": "13F7CAF67B8934899D1AAA883854B159B9E1E49CFDAB389BDD24E4672F57D826",
          "variables": {
            "configuration": "String \u0022Debug\u0022"
          },
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "**/*.binlog",
            "bin/",
            "obj/",
            "obj/*.json",
            "obj/*.props",
            "obj/*.targets"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@dotnet build",
              "actions": [
                {
                  "command": "dotnet",
                  "arguments": "build  --configuration Debug    "
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": {
                "script": {},
                "command": "build",
                "context": [
                  "map",
                  {
                    "configuration": [
                      "string",
                      "Debug"
                    ],
                    "context": [
                      "object",
                      {
                        "debug": true,
                        "directory": "projects/dotnet-app",
                        "ci": true,
                        "nodeHash": "BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C",
                        "command": "build",
                        "branchOrTag": "main"
                      }
                    ]
                  }
                ]
              }
            }
          ]
        },
        "dist": {
          "hash": "076CD4BA37B1947AE860169B31A172CECA44175E61ACDAA02DDA5295A8136D6A",
          "variables": {
            "configuration": "String \u0022Debug\u0022"
          },
          "dependsOn": [
            "build"
          ],
          "outputs": [
            "**/*.binlog",
            "bin/",
            "obj/",
            "obj/*.json",
            "obj/*.props",
            "obj/*.targets"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@dotnet publish",
              "actions": [
                {
                  "command": "dotnet",
                  "arguments": "publish  --no-dependencies --configuration Debug  --no-restore --no-build   "
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        },
        "docker": {
          "hash": "CF0E0D7DD67A58796E6CAFCB42180D0916EA97906676B80801C9B19E6D29020B",
          "variables": {
            "configuration": "String \u0022Debug\u0022"
          },
          "dependsOn": [
            "dist"
          ],
          "outputs": [
            "**/*.binlog",
            "bin/",
            "obj/",
            "obj/*.json",
            "obj/*.props",
            "obj/*.targets"
          ],
          "actions": [
            {
              "cache": 2,
              "metaCommand": "@docker build",
              "actions": [
                {
                  "command": "docker",
                  "arguments": "build --file Dockerfile --tag ghcr.io/magnusopera/dotnet-app:BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C --build-arg configuration=\u0022Debug\u0022 ."
                },
                {
                  "command": "docker",
                  "arguments": "push ghcr.io/magnusopera/dotnet-app:BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        },
        "push": {
          "hash": "D0A2911832DB7C267ECF603527A489E8A74276D579E1D37EEC32E4D805CD9DFF",
          "variables": {
            "configuration": "String \u0022Debug\u0022"
          },
          "dependsOn": [
            "docker"
          ],
          "outputs": [
            "**/*.binlog",
            "bin/",
            "obj/",
            "obj/*.json",
            "obj/*.props",
            "obj/*.targets"
          ],
          "actions": [
            {
              "cache": 2,
              "metaCommand": "@docker push",
              "actions": [
                {
                  "command": "docker",
                  "arguments": "buildx imagetools create -t ghcr.io/magnusopera/dotnet-app:main ghcr.io/magnusopera/dotnet-app:BEC245F2B4456F59B4639F883DF1985A35A075E71D4A60D13F980B5A205ECD1C"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": [
        "app",
        "dotnet"
      ]
    },
    "projects/make-app": {
      "id": "projects/make-app",
      "hash": "47A18E4D676C50894D393158B4C1CE5C7736BD65C6C15CC542E764E876CB2E68",
      "dependencies": [
        "libraries/shell-lib"
      ],
      "files": [
        "Makefile",
        "PROJECT"
      ],
      "targets": {
        "build": {
          "hash": "C993863FDB78C411F13AE23D7E328BBF9B33BB4BCC79FBD5BF4E9DA3DDEC9EAA",
          "variables": {
            "secret_message": "String \u0022tagada\u0022"
          },
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "dist"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@shell echo",
              "actions": [
                {
                  "command": "echo",
                  "arguments": "building project1"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            },
            {
              "cache": 3,
              "metaCommand": "@make build",
              "actions": [
                {
                  "command": "make",
                  "arguments": "build secret=\u0022tagada\u0022"
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": [
        "app"
      ]
    },
    "projects/npm-app": {
      "id": "projects/npm-app",
      "hash": "C35EBCC267398EEEC270894F7616EEE6382F70EAEC3C16247A7EBE487A914E4B",
      "dependencies": [],
      "files": [
        "PROJECT",
        "lib/main.ts",
        "package-lock.json",
        "package.json",
        "tsconfig.json"
      ],
      "targets": {
        "build": {
          "hash": "DA919F8E2932BCECA471F3A9528AF01612A914D6C47F24F6A301BBAEB1853BD6",
          "variables": {},
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "dist/"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "npm build",
              "actions": [
                {
                  "command": "npm",
                  "arguments": "ci"
                },
                {
                  "command": "npm",
                  "arguments": "run build -- "
                }
              ],
              "container": "node:20",
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": [
        "app"
      ]
    },
    "projects/rust-app": {
      "id": "projects/rust-app",
      "hash": "0CEC6981250E3AC5C5CE7EBE9FF15A39800DDC5287F862EBDF540A5C1FF52AC0",
      "dependencies": [],
      "files": [
        "Cargo.lock",
        "Cargo.toml",
        "PROJECT",
        "src/main.rs"
      ],
      "targets": {
        "build": {
          "hash": "1EDA297E2BAAC86B780323E908D35EF2C1FDC8458124D43476741627CFA8400A",
          "variables": {},
          "dependsOn": [
            "^build"
          ],
          "outputs": [
            "target/debug/",
            "target/release/"
          ],
          "actions": [
            {
              "cache": 3,
              "metaCommand": "@cargo build",
              "actions": [
                {
                  "command": "cargo",
                  "arguments": "build --profile dev "
                }
              ],
              "container": null,
              "containerVariables": [],
              "batchContext": null
            }
          ]
        }
      },
      "labels": [
        "app",
        "rust"
      ]
    }
  },
  "configuration": "default",
  "note": null,
  "tag": null
}