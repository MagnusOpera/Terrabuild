builders:
  dotnet:
  docker:
    use: docker
    with: Dockerfile
    parameters:
      image: ghcr.io/magnusopera/terrabuild

steps:
  build:
    - (dotnet): build

  dist:
    - (dotnet): publish

  docker:
    - (docker): build
      arguments:
        configuration: $(configuration)

  publish:
    - (dotnet): pack
    - (dotnet): push
    - (docker): push

labels:
  - app
  - dotnet
