
configuration {
    parser @dotnet
    labels [ "app"
             "dotnet"]
}

extension @docker {
  defaults {
    image: "ghcr.io/magnusopera/terrabuild"
  }
}

target build {
    @dotnet build { }
}

target dist {
    @dotnet publish { }
    @dotnet pack { }
    @docker build { arguments: { configuration: $configuration } }
}

target publish {
    @docker push { }
}
